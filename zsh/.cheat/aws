# 创建带有1块sc1磁盘的ec2
aws ec2 run-instances --image-id ami-5d894330 --count 6 --instance-type m4.2xlarge --key-name aws_key --security-group-ids sg-e1eea084 --placement AvailabilityZone=cn-north-1b --subnet-id subnet-893dd7fe --block-device-mappings "[{\"DeviceName\": \"/dev/sdf\",\"Ebs\":{\"VolumeSize\":500,\"VolumeType\":\"sc1\"}}]"

# aws格式化磁盘
mkfs -t ext4 /dev/xvdf

# aws增加fstab
/dev/xvdf   /data      ext4    defaults,noatime,nodiratime         0 2

# 根据tag获取实例的ip地址
aws ec2 describe-instances --filters Name=tag:Name,Values='gp-tranfer-offline*' | jq '.Reservations[].Instances[]| {public: .PublicIpAddress, private: .PrivateIpAddress, tags: .Tags[].Value}' | sed 'N;N;N;N;s/\n/ /g'

# 按tag查找ids and status info
aws ec2 describe-instances --filters Name=tag:Name,Values='*deploy*' | jq '.Reservations[].Instances[]| { ids: .InstanceId, state: .State.Name}'
aws ec2 describe-instances --filters Name=tag:Name,Values='*deploy*' | jq '.Reservations[].Instances[]| { ids: .InstanceId, state: .State.Name, tags: .Tags[].Value}'

# start instance had stopped
aws ec2 start-instances --instance-ids InstanceId

# stop instance had started
aws ec2 stop-instances --instance-ids InstanceId

# add emr / dir size
修改卷大小
EC2->卷->根据实例ID找到卷->Action->修改
参考http://docs.aws.amazon.com/zh_cn/AWSEC2/latest/UserGuide/ebs-expand-volume.html

登陆机器，使文件系统覆盖
df -ah
sudo file -s /dev/xvda1
sudo resize2fs /dev/xvda1
参考http://docs.aws.amazon.com/zh_cn/AWSEC2/latest/UserGuide/ebs-expand-volume.html#recognize-expanded-volume-linux
